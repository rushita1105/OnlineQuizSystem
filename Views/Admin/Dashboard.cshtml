@model List<OnlineQuizSystem.Models.Question>
@{
    ViewBag.Title = "Admin Dashboard";
}

<div class="admin-container">
    <div class="admin-header">
        <h2 class="admin-title">Admin Dashboard</h2>
        <div class="admin-actions">
            <a href="/Admin/AddQuestion">
                <i class="fas fa-plus"></i> Add Question
            </a>
            <a href="/Admin/ViewResults">
                <i class="fas fa-chart-bar"></i> View Results
            </a>
            <a href="/Account/Logout" class="logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </div>

    @if (TempData["Message"] != null)
    {
        <div class="alert alert-success">
            <i class="fas fa-check-circle"></i>
            @TempData["Message"]
        </div>
    }

    @foreach (var quizGroup in Model.GroupBy(q => q.QuizType).OrderBy(g => g.Key))
    {
        <div class="quiz-section">
            <h3 class="quiz-type-header">@(string.IsNullOrEmpty(quizGroup.Key) ? "Uncategorized" : quizGroup.Key)</h3>
            <table class="questions-table">
                <thead>
                    <tr>
                        <th width="5%">ID</th>
                        <th width="35%">Question</th>
                        <th width="45%">Answers</th>
                        <th width="15%">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var q in quizGroup)
                    {
                        <tr>
                            <td>@q.Id</td>
                            <td>@q.Text</td>
                            <td>
                                <ul class="answer-list">
                                    @foreach(var a in q.Answers)
                                    {
                                        <li class="answer-item">
                                            <span class="answer-status @(a.IsCorrect ? "correct" : "wrong")">
                                                @(a.IsCorrect ? "✓" : "×")
                                            </span>
                                            @a.Text
                                        </li>
                                    }
                                </ul>
                            </td>
                            <td class="question-actions">
                                <a href="@Url.Action("EditQuestion", "Admin", new { id = q.Id })" class="btn-edit">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                                <form method="post" action="@Url.Action("DeleteQuestion", "Admin", new { id = q.Id })" style="display:inline;">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn-delete" onclick="return confirm('Are you sure you want to delete this question?')">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
